# Documentation System Overview

**Last Updated**: February 2025

The `/docs` directory now powers a Starlight (Astro) site that serves as the single source of truth for platform,
workflow, and operations documentation. All hand-written content lives under `docs/src/content/docs`, is decorated with
front matter, and is governed by automated scripts.

---

## ğŸ“ Structure

```
docs/
â”œâ”€â”€ README.md                     # This file
â”œâ”€â”€ astro.config.mjs (root)       # Astro + Starlight configuration (in repo root)
â”œâ”€â”€ starlight.config.mjs (root)   # Sidebar, navigation, metadata (in repo root)
â”œâ”€â”€ generated/                    # TypeDoc output (auto-generated)
â”œâ”€â”€ governance/                   # Audit outputs and cleanup manifests
â”œâ”€â”€ public/                       # Static assets for the doc site
â””â”€â”€ src/
    â””â”€â”€ content/
        â””â”€â”€ docs/                 # Published documentation grouped by category
            â”œâ”€â”€ governance/       # Governance, changelog, automation policies
            â”œâ”€â”€ platform/         # Architecture and subsystem coverage
            â”œâ”€â”€ workflows/        # Agent orchestration + workflow catalogue
            â”œâ”€â”€ operations/       # CI/CD, observability, deployment runbooks
            â”œâ”€â”€ quality/          # Testing and performance guidance
            â”œâ”€â”€ reference/        # API, TypeDoc, Storybook integration
            â”œâ”€â”€ legacy/           # Links to legacy backlog + cleanup roadmap
            â””â”€â”€ changelog/        # Release notes (optional human-authored content)
```

All legacy Markdown files generated by previous AI agents remain under their original directories (e.g.
`docs/technical`, `docs/guides`). They are catalogued automatically and scheduled for consolidation via the governance
manifest.

---

## ğŸ§­ Governance Commands

| Command | Description |
| --- | --- |
| `pnpm docs:audit` | Generates `docs/governance/repo-audit-report.md` and `docs/governance/cleanup-manifest.json`. |
| `pnpm docs:governance` | Runs the audit plus validation for front matter and naming conventions. |
| `pnpm docs:typedoc` | Emits TypeScript API docs to `docs/generated/typedoc`. |
| `pnpm docs:generate` | Runs TypeDoc and builds the Starlight site. |
| `pnpm docs:changelog -- --base origin/main` | Appends entries to `CHANGELOG.md` based on changed files. |

---

## âœ… Required Metadata

Every page under `docs/src/content/docs` must provide the following front matter fields:

```
---
title: ...
description: ...
lastUpdated: YYYY-MM-DD
category: <overview|governance|platform|workflows|operations|quality|reference|legacy|changelog>
---
```

Filenames must be kebab-case (e.g. `agent-orchestration.mdx`). The governance agent enforces these rules locally and in
CI; violations block merges.

---

## ğŸ—„ï¸ Legacy Content Policy

1. **Do not add new Markdown files outside `docs/src/content/docs`.** Update existing canonical pages instead.
2. **When referencing legacy docs**, link to the `legacy/` pages which describe consolidation targets.
3. **Archive rather than delete.** Move deprecated material into `docs/archive/<date>-cleanup/` and record the action in
   the changelog.

---

## ğŸ” Change Process

1. Update or create content inside `docs/src/content/docs`.
2. Run `pnpm docs:governance` locally to catch metadata or duplication issues.
3. Run `pnpm docs:changelog -- --base origin/main` to add entries under the appropriate release.
4. Submit your PR. CI will re-run audit, enforcement, docs generation, and deployment.

---

## ğŸš€ Deployment

The `docs-maintenance` GitHub Action runs on every push and performs:

1. `pnpm install --frozen-lockfile`
2. `pnpm lint && pnpm type-check && pnpm test`
3. `pnpm docs:governance`
4. `pnpm docs:generate`
5. Deployment to the configured Netlify/Vercel target using `DOCS_DEPLOY_TOKEN`

Deployment results, audit summaries, and changelog updates are attached to the workflow summary for traceability.
